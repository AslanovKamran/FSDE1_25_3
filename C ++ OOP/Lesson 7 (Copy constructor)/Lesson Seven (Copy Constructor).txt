üìö –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

1. –ó–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?
–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–æ–±–ª–µ–º—É –∫–æ–ø–∏—Ä–æ–≤–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤.
–ù–∞—á–Ω—ë–º —Å –ø—Ä–æ—Å—Ç–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞: –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö.

    int a = 5;
    int b = a;

–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –ø—Ä–æ—Å—Ç–æ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π a –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é b.

–¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–¥–∏–º –∫–ª–∞—Å—Å, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π —á–µ–ª–æ–≤–µ–∫–∞:

–¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–¥–∏–º –∫–ª–∞—Å—Å –æ–ø–∏—Å—ã–≤–∞—é–∏–π —á–µ–ª–æ–≤–µ–∫–∞:

    class Person 
    {
        public:
            string name;
            int age;
        Person(string n, int a)
        {
            name = n;
            age = a;
        }

        void ShowInfo()
        {
            cout << name << " - " << age << endl;        
        }

    };

–ë–ª–∞–≥–æ–¥–∞—Ä—è –º–æ–µ–º—É –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω–æ–º—É –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É —è –º–æ–≥—É —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º:

    Person p_1 = Person("John", 30);

–¢–∞–∫ –∂–µ —è –º–æ–≥—É —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ–¥–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –≤ –¥—Ä—É–≥–æ–π:

	Person p_1 = Person("John", 30);
    Person p_2 = p_1;

    p_1.ShowInfo();
    p_2.ShowInfo();


–ò –Ω–∞ —ç–∫—Ä–∞–Ω–µ —è —É–≤–∏–∂—É –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ. –í—Å–µ –¥–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø–µ—Ä–µ–¥–µ–ª—ã–≤–∞–µ—Ç 2—É—é —Å—Ç—Ä–æ—á–∫—É –≤ —Ç–∞–∫–æ–π –≤–∏–¥

    Person p_2 = Person(p_1);

–ò –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –Ω–æ –∫–∞–∫? –í–µ–¥—å —É –º–µ–Ω—è –Ω–µ—Ç —Ç–∞–∫–æ–π –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –ø—Ä–∏–Ω—è—Ç—å –≤ —Å–µ–±—è –æ–±—ä–µ–∫—Ç.

–í—Å–µ –¥–µ–ª–æ –≤ —Ä–∞–±–æ—Ç–µ —Å–∞–º–æ–≥–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞. –¢–æ—á–Ω–æ —Ç–∞–∫–∂–µ –∫–∞–∫ –æ–Ω —Å–∞–º —Å–æ–∑–¥–∞–µ—Ç –∑–∞ –Ω–∞—Å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –æ–Ω —Ç–∞–∫–∂–µ –∑–∞ –Ω–∞—Å —Å–æ–∑–¥–∞–µ—Ç –∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ç–∞–∫–æ–≥–æ –≤–∏–¥–∞:

    Person(const Person&)

–î–∞–Ω–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è. –û–Ω –ø–æ—ç–ª–µ–º–µ–Ω—Ç–Ω–æ –∫–æ–ø–∏—Ä—É–µ—Ç –ø–æ–ª—è –∫–ª–∞—Å—Å–∞. –ò–º–µ–Ω–Ω–æ –∑–∞ —Å—á–µ—Ç –Ω–µ–≥–æ —è –∏ —Å–º–æ–≥ –ø—Ä–∏—Ä–∞–≤–Ω—è—Ç—å –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç –∫ –¥—Ä—É–≥–æ–º—É. –ù–æ –∑–¥–µ—Å—å —Ç–∞–∫–∂–µ –µ—Å—Ç—å –º–æ–º–µ–Ω—Ç—ã –∫–æ–≥–¥–∞ –º–Ω–µ –Ω—É–∂–Ω–æ –¥–∞–Ω–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —á—É—Ç—å —á—É—Ç—å –∏–∑–º–µ–Ω–∏—Ç—å, —Ç–∞–∫ –∫–∞–∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è –Ω–µ –≤—Å–µ–≥–¥–∞ –Ω–∞–º –º–æ–∂–µ—Ç –ø–æ–¥–æ–π—Ç–∏.

–î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –≤ –∫–ª–∞—Å—Å–µ –ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å —ç—Ç–æ—Ç –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, —Ç–æ—á–Ω–æ —Ç–∞–∫–∂–µ –∫–∞–∫ –∏ –ø–µ—Ä–µ–¥–µ–ª—ã–≤–∞–ª–∏ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞–∏—Ü–∏—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ª–µ–¥—É—é—â–∞—è: –æ–Ω –ø—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –≤ –ø–∞–º—è—Ç–∏ —Ç–æ—á–Ω–æ —Ç–∞–∫–æ–π –∂–µ –æ–±—ä–µ–∫—Ç –≤ –ø–∞–º—è—Ç–∏, —Å —Ç–∞–∫–∏–º–∏ –∂–µ —Ä–∞–∑–º–µ—Ä–æ–º, –Ω–æ –≤ —Ä–∞–∑–ª–∏—á–Ω–æ–º –∞–¥—Ä–µ—Å–µ. 

    //Copy-contructor
    Person(const Person& other)
    {

    }

–ï—Å–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å copy ctor –≤ —Ç–∞–∫–æ–º –≤–∏–¥–µ —Ç–æ –º—ã —Å–ª–æ–º–∞–µ–º –ª–æ–≥–∏–∫—É p_2. –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–∞–º –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Ç–∞–∫–æ–º –≤–∏–¥–µ:

   //Copy-contructor
   Person(const Person& other)
   {
       this->age = other.age;
       this->name = other.name;
   }


–ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ —Å—Ç–∞—Ç–∏—á–∏—Å–∫–æ–π –ø–∞–º—è—Ç—å—é —Ç–æ –Ω–∏–∫–∞–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º –Ω–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç:

    Person p_1 = Person("John", 30);
    Person p_2 = Person(p_1);

    p_1.ShowInfo();
    p_2.ShowInfo();

    p_1.age = 250;

    p_1.ShowInfo();
    p_2.ShowInfo();

–£ –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –ü—Ä–æ–±–ª–µ–º–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –µ—Å–ª–∏ –º—ã –±—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –ø–∞–º—è—Ç—å—é. –î–∞–≤–∞–π—Ç–µ –ø–µ—Ä–µ–¥–µ–ª–∞–µ–º name –≤ —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö char* –∏ –ø–æ–ø—ã—Ç–∞–µ–º—Å—è –ø–æ–º–µ–Ω—è—Ç—å –∑–¥–µ—Å—å –ø–µ—Ä–≤—É—é –±—É–∫–≤—É –ø–µ—Ä–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞:

    class Person
    {
    public:
        char* name;
        int age;

        Person(const char* name, int a)
        {
            int size = strlen(name) + 1;
            this->name = new char[size];
            strcpy_s(this->name, size, name);
            age = a;
        }

        void ShowInfo()
        {
            cout << name << " - " << age << endl;
        }

    };

    int main()
    {
        Person p_1 = Person("John", 30);
        Person p_2 = Person(p_1);

        p_1.ShowInfo();
        p_2.ShowInfo();

        p_1.name[0] = 'G';

        cout << "\nAfter modification:\n" << endl;

        p_1.ShowInfo();
        p_2.ShowInfo();

    }


–í–∏–¥–Ω–æ, —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –ø–æ–ª—è –æ–±–æ–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤. –í—Å–µ –¥–µ–ª–æ –≤ —É–∫–∞–∑–∞—Ç–µ–ª—è—Ö. –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ. –¢–∞–∫ –∫–∞–∫ name —è–≤–ª—è–µ—Ç—Å—è —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –∫–∞–∫–æ–π-—Ç–æ —É—á–∞—Å—Ç–æ–∫ –ø–∞–º—è—Ç–∏, —Ç–æ –≤ p_2 –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —ç—Ç—É –æ–±–ª–∞—Å—Ç—å –ø–∞–º—è—Ç–∏. –ò –ø—Ä–∏ –∏–∑–º–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –æ–¥–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞, –≤—Å–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ –Ω–µ–≥–æ —Ç–∞–∫–∂–µ –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –±—É–¥—É—Ç —á–∏—Ç–∞—Ç—å –Ω–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –° –¥–∞–Ω–Ω–æ–π –ø—Ä–æ–±–ª–µ–º–æ–π –º—ã —Å—Ç–∞–ª–∫–∏–≤–∞–ª–∏—Å—å —É–∂–µ –Ω–µ —Ä–∞–∑, –Ω—É–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è, –∞ –Ω–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ –∞–¥—Ä–µ—Å—Å–∞. 

–í –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ —ç—Ç–æ–º—É –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤. –¢–∞–∫ –∫–∞–∫ –º—ã –æ–±—è–∑–∞–Ω—ã –≤ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –∫–ª–∞—Å—Å–∞ –ø—Ä–æ–ø–∏—Å–∞—Ç—å delete, –º—ã –º–æ–∂–µ–º –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –æ—á–∏—Å—Ç–∏—Ç—å —É–∂–µ –æ—á–∏—â–µ–Ω–Ω—ã–π —É—á–∞—Å—Ç–æ–∫ –ø–∞–º—è—Ç–∏, —á—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –∫—Ä–∞—Ö—É –ø—Ä–æ–≥—Ä–∞–º–º—ã. –£–±—É–¥–∏—Ç—å—Å—è –≤ —ç—Ç–æ–º –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–∏–≤ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä –≤ –Ω–∞—à –∫–ª–∞—Å—Å:


    ~Person() 
    {
		delete[] name;
    }
    
–ò —Ç–µ–ø–µ—Ä—å –∑–∞–ø—É—Å—Ç–∏–≤ –Ω–∞—à—É –ø—Ä–æ–≥—Ä–∞–º–º—É –º—ã –º–æ–∂–µ–º —É–≤–∏–¥–µ—Ç—å crash. –¢–∞–∫ –∫–∞–∫ p_2 –±—É–¥–µ—Ç –æ—á–∏—â–∞—Ç—å –æ–±–ª–∞—Å—Ç—å, —É–∂–µ –æ—á–µ—â–µ–Ω–Ω—É—é –æ–±—ä–µ–∫—Ç–æ–º p_1.

–î–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã –Ω–∞–º –∫–∞–∫ —Ä–∞–∑ —Ç–∞–∫–∏ –∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã –≤–º–µ—Å—Ç–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —É–∫–∞–∑–∞—Ç–µ–ª–µ–π, –º—ã –∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è. –ò –¥–µ–ª–∞–µ—Ç—Å—è —ç—Ç–æ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º. –ü—Ä–æ—Å—Ç–æ –≤—Ä—É—á–Ω—É—é –∑–∞–ø–∏—Å–∞—Ç—å –≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –Ω–æ–≤—ã–π –∫–æ–ø–∏—Ä—É–µ–º—ã–π –æ–±—ä–µ–∫—Ç.

    Person(const Person& p)
    {
        this->age = p.age;
        int size = strlen(p.name) + 1;
        this->name = new char[size];
        strcpy_s(this->name, size, p.name);
    }

–ò —Ç–µ–ø–µ—Ä—å –Ω–∞—à–∞ —Ñ-—Ü–∏—è main –ø–æ–ª–Ω–æ—Å—Ç—å —Ä–∞–±–æ—á–∞—è. –ú—ã –∏–∑–±–∞–≤–∏–ª–∏—Å—å –æ—Ç —É–¥–∞–ª–µ–Ω–∏—è –æ—á–∏—â–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏, –∞ —Ç–∞–∫–∂–µ —Ä–µ—à–∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—É –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ –æ–¥–Ω–æ–º—É –∏ —Ç–æ–º—É –∂–µ —É–∫–∞–∑–∞—Ç–µ–ª—é.

6. –ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ

üí° –ï—Å–ª–∏ –≤ –∫–ª–∞—Å—Å–µ –µ—Å—Ç—å –ø–æ–ª—è —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –ø–∞–º—è—Ç—å—é, –Ω—É–∂–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:

    –ù–∞–ø–∏—Å–∞—Ç—å –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä
    –ù–∞–ø–∏—Å–∞—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

–ù–µ–º–Ω–æ–≥–æ —Ç–µ–æ—Ä–∏–∏:
–ü–æ—ç–ª–µ–º–µ–Ω—Ç–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö (–¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ copy –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞) –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω—ã–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º (shallow copy)
–ü–µ—Ä–µ–¥–µ–ª–∞–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≥–ª—É–±–æ–∫–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ (deep copy).