üéØ "–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ —Å—á–µ—Ç–∞–º–∏"

–°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:

    —Å–æ–∑–¥–∞–≤–∞—Ç—å –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Å—á–µ—Ç–∞;

    –≤–Ω–æ—Å–∏—Ç—å –∏ —Å–Ω–∏–º–∞—Ç—å –¥–µ–Ω—å–≥–∏;

    –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏;

    –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –±–∞–ª–∞–Ω—Å.

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É—Å—Ç–æ–π—á–∏–≤–∞ –∫ –æ—à–∏–±–∫–∞–º –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∫—É –∏—Å–∫–ª—é—á–µ–Ω–∏–π –¥–ª—è –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∏.


‚öôÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –º–æ–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –¥–≤–∞ –∫–ª–∞—Å—Å–∞

BankAccount ‚Äî –∫–ª–∞—Å—Å, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π –æ—Ç–¥–µ–ª—å–Ω—ã–π –±–∞–Ω–∫–æ–≤—Å–∫–∏–π —Å—á—ë—Ç;

Bank ‚Äî –∫–ª–∞—Å—Å, —É–ø—Ä–∞–≤–ª—è—é—â–∏–π —Å–ø–∏—Å–∫–æ–º —Å—á–µ—Ç–æ–≤;


üè¶ –ö–ª–∞—Å—Å BankAccount

class BankAccount
{
private:
    int id;
    string owner;
    double balance;

public:
    BankAccount(int id, string owner, double initialBalance);

    void deposit(double amount);
    void withdraw(double amount);
    void transfer(BankAccount& to, double amount);

    double getBalance() const;
    string getOwner() const;
    int getId() const;
};

üí° –í –∫–∞—á–µ—Å—Ç–≤–µ Id –º–æ–∂–Ω–æ –≤–∑—è—Ç—å –Ω–æ–º–µ—Ä –∏–Ω–¥–µ–∫—Å–∞ –≤ –±–∞–Ω–∫–µ (accounts.size() –∏–ª–∏ accounts.size() + 1).

‚úÖ –õ–æ–≥–∏–∫–∞ –º–µ—Ç–æ–¥–æ–≤:

deposit(double amount)

    –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç std::invalid_argument, –µ—Å–ª–∏ amount <= 0;

    —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –±–∞–ª–∞–Ω—Å.

withdraw(double amount)

    –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç std::invalid_argument, –µ—Å–ª–∏ amount <= 0;

    –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç std::runtime_error, –µ—Å–ª–∏ balance < amount;

    —É–º–µ–Ω—å—à–∞–µ—Ç –±–∞–ª–∞–Ω—Å.

transfer(BankAccount& to, double amount)

    –≤—ã–∑—ã–≤–∞–µ—Ç withdraw() —É —Ç–µ–∫—É—â–µ–≥–æ —Å—á—ë—Ç–∞ –∏ deposit() —É –ø–æ–ª—É—á–∞—Ç–µ–ª—è;

    –ø—Ä–∏ –æ—à–∏–±–∫–µ –¥–æ–ª–∂–Ω–æ ¬´–≤—Å–ø–ª—ã—Ç—å¬ª –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç withdraw() –∏–ª–∏ deposit().


üß± –ö–ª–∞—Å—Å Bank

class Bank
{
private:
    vector<BankAccount> accounts;

public:
    void createAccount(string owner, double initialBalance);
    BankAccount& findAccount(int id);
    void printAllAccounts();
};


‚úÖ –õ–æ–≥–∏–∫–∞:

createAccount()

    –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç std::invalid_argument, –µ—Å–ª–∏ –∏–º—è –ø—É—Å—Ç–æ–µ –∏–ª–∏ –±–∞–ª–∞–Ω—Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π;

    –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–π —Å—á—ë—Ç –≤ —Å–ø–∏—Å–æ–∫.

findAccount(int id)

    –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ —Å—á—ë—Ç, –µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω;

    –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç std::out_of_range, –µ—Å–ª–∏ —Å—á—ë—Ç —Å —Ç–∞–∫–∏–º ID –Ω–µ –Ω–∞–π–¥–µ–Ω.





====================================================================================





#include <iostream>
#include <vector>
#include <stdexcept> // –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π
using namespace std;

class BankAccount
{
private:
    int id;
    string owner;
    double balance;

public:
    BankAccount(int id, string owner, double initialBalance)
    {
        if (owner.empty())
            throw invalid_argument("–ò–º—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º.");

        if (initialBalance < 0)
            throw invalid_argument("–ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º.");

        this->id = id;
        this->owner = owner;
        this->balance = initialBalance;
    }

    int getId() const { return id; }
    string getOwner() const { return owner; }
    double getBalance() const { return balance; }

    // –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—á—ë—Ç–∞
    void deposit(double amount)
    {
        if (amount <= 0)
            throw invalid_argument("–°—É–º–º–∞ –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –±–æ–ª—å—à–µ –Ω—É–ª—è.");

        balance += amount;
        cout << "‚úÖ " << owner << " –ø–æ–ø–æ–ª–Ω–∏–ª —Å—á—ë—Ç –Ω–∞ " << amount << " —Ä—É–±.\n";
    }

    // –°–Ω—è—Ç–∏–µ —Å—Ä–µ–¥—Å—Ç–≤
    void withdraw(double amount)
    {
        if (amount <= 0)
            throw invalid_argument("–°—É–º–º–∞ –¥–ª—è —Å–Ω—è—Ç–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –±–æ–ª—å—à–µ –Ω—É–ª—è.");

        if (balance < amount)
            throw runtime_error("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—á—ë—Ç–µ.");

        balance -= amount;
        cout << "üí∏ " << owner << " —Å–Ω—è–ª " << amount << " —Ä—É–±.\n";
    }

    // –ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏
    void transfer(BankAccount& to, double amount)
    {
        if (this->id == to.id)
            throw invalid_argument("–ù–µ–ª—å–∑—è –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –¥–µ–Ω—å–≥–∏ —Å–∞–º–æ–º—É —Å–µ–±–µ.");

        // –í—ã–∑–æ–≤–µ–º –º–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–∞–º–∏ –≤—ã–±—Ä–æ—Å—è—Ç –æ—à–∏–±–∫–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
        this->withdraw(amount);
        to.deposit(amount);

        cout << "üîÅ –ü–µ—Ä–µ–≤–µ–¥–µ–Ω–æ " << amount << " —Ä—É–±. –æ—Ç " << owner
             << " –∫ " << to.getOwner() << ".\n";
    }
};

// =====================================================================

class Bank
{
private:
    vector<BankAccount> accounts;

public:
    // –°–æ–∑–¥–∞–Ω–∏–µ —Å—á—ë—Ç–∞
    void createAccount(string owner, double initialBalance)
    {
        int id = accounts.size() + 1;
        BankAccount account(id, owner, initialBalance);
        accounts.push_back(account);

        cout << "üè¶ –°—á—ë—Ç #" << id << " —Å–æ–∑–¥–∞–Ω –¥–ª—è " << owner
             << " —Å –±–∞–ª–∞–Ω—Å–æ–º " << initialBalance << " —Ä—É–±.\n";
    }

    // –ü–æ–∏—Å–∫ —Å—á—ë—Ç–∞ –ø–æ ID
    BankAccount& findAccount(int id)
    {
        for (auto& acc : accounts)
        {
            if (acc.getId() == id)
                return acc;
        }

        throw out_of_range("–°—á—ë—Ç —Å —Ç–∞–∫–∏–º ID –Ω–µ –Ω–∞–π–¥–µ–Ω.");
    }

    // –ü–µ—á–∞—Ç—å –≤—Å–µ—Ö —Å—á–µ—Ç–æ–≤
    void printAllAccounts()
    {
        cout << "\nüìã –¢–µ–∫—É—â–∏–µ —Å—á–µ—Ç–∞:\n";
        for (const auto& acc : accounts)
        {
            cout << "ID: " << acc.getId()
                 << " | –í–ª–∞–¥–µ–ª–µ—Ü: " << acc.getOwner()
                 << " | –ë–∞–ª–∞–Ω—Å: " << acc.getBalance() << " —Ä—É–±.\n";
        }
        cout << endl;
    }
};

// =====================================================================

int main()
{
    setlocale(LC_ALL, "Russian");

    Bank bank;

    try
    {
        bank.createAccount("–ò–≤–∞–Ω", 5000);
        bank.createAccount("–ê–Ω–Ω–∞", 10000);
        bank.createAccount("–ü—ë—Ç—Ä", 2000);

        bank.printAllAccounts();

        // –†–∞–±–æ—Ç–∞ —Å–æ —Å—á–µ—Ç–∞–º–∏
        BankAccount& ivan = bank.findAccount(1);
        BankAccount& anna = bank.findAccount(2);

        cout << "\n=== –û–ø–µ—Ä–∞—Ü–∏–∏ ===\n";
        ivan.deposit(1500);
        anna.withdraw(2000);
        ivan.transfer(anna, 3000);

        // –û—à–∏–±–∫–∞: –ø–æ–ø—ã—Ç–∫–∞ —Å–Ω—è—Ç—å –±–æ–ª—å—à–µ, —á–µ–º –µ—Å—Ç—å
        anna.withdraw(20000);

        // –û—à–∏–±–∫–∞: –ø–µ—Ä–µ–≤–æ–¥ —Å–∞–º–æ–º—É —Å–µ–±–µ
        ivan.transfer(ivan, 100);

        // –û—à–∏–±–∫–∞: –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å—á—ë—Ç
        bank.findAccount(99);
    }

    catch (const invalid_argument& ex)
    {
        cout << "\n‚ö†Ô∏è –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: " << ex.what() << endl;
    }

    catch (const out_of_range& ex)
    {
        cout << "\n‚ùå –û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ —Å—á—ë—Ç–∞: " << ex.what() << endl;
    }

    catch (const runtime_error& ex)
    {
        cout << "\nüí• –û—à–∏–±–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏: " << ex.what() << endl;
    }

    catch (const exception& ex)
    {
        cout << "\nüö® –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞: " << ex.what() << endl;
    }

    cout << "\n=== –ò—Ç–æ–≥–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—á–µ—Ç–æ–≤ ===";
    bank.printAllAccounts();

    cout << "‚úÖ –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ." << endl;
    return 0;
}
